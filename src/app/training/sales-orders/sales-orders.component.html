<!-- <app-selected-orders [childMessage]="parentMessage"></app-selected-orders> -->
<!-- working 1 -->
<!-- Message: {{message}}
<app-selected-orders></app-selected-orders> -->


<!-- working 2 -->
<!-- <p>{{message}}</p> -->

<!-- <button *ngIf="showAll" mat-raised-button color="primary" (click)="showSelected()">Show Selected</button>
<button *ngIf="!showAll" mat-raised-button color="primary" (click)="showSelected()">Show All</button>
<button mat-raised-button color="warn" (click)="clearAll()">Clear All</button> -->
<!-- <button *ngIf="!showAll" mat-raised-button color="accent" (click)="confirmProduction()">Confirm</button> -->
<mat-tab-group #tabGroup (selectedIndexChange)="_setDataSource($event)">
  <mat-tab label="Sales Orders">

    <div>

      <!-- <div *ngIf="showAll"> -->
      <div fxLayoutAlign="center center">
        <mat-form-field fxFlex="40%">
          <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>

      </div>
      <mat-table #table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="id">
          <mat-header-cell *matHeaderCellDef mat-sort-header>ID</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.id }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="orderDate">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.orderDate }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="orderNumber">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Order Number</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.orderNumber }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="company">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Company</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.company }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="bf">
          <mat-header-cell *matHeaderCellDef mat-sort-header>BF</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.bf }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="gsm">
          <mat-header-cell *matHeaderCellDef mat-sort-header>GSM</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.gsm }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="reel">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Reel</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.reel }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="size">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Size</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.size }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="voucherKey">
          <mat-header-cell *matHeaderCellDef mat-sort-header>VoucherKey</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.voucherKey }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="weight">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Weight</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.weight }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="select">
          <mat-header-cell *matHeaderCellDef>Select
            <!-- <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()"> -->
            <!-- </mat-checkbox> -->
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <button mat-raised-button color="primary" (click)="selectFromAll(row,row.id)">Select</button>
            <!-- <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"> -->
            <!-- </mat-checkbox> -->
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator #paginator [pageSize]="50" [pageSizeOptions]="[1, 5, 10, 20]">
      </mat-paginator>
    </div>
  </mat-tab>
  <mat-tab label="Selected Orders">
    <div>
      <!-- <div *ngIf="!showAll"> -->
      <div fxLayoutAlign="center center">
        <mat-form-field fxFlex="40%">
          <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>
          <button mat-raised-button color="accent" (click)="confirmProduction()">Confirm</button>
      </div>
      <!-- <mat-table [dataSource]="dataSource1" matSort> -->
      <mat-table #table2="matSort" [dataSource]="dataSource2" matSort>

        <ng-container matColumnDef="id">
          <mat-header-cell *matHeaderCellDef mat-sort-header>ID</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.id }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="orderDate">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.orderDate }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="orderNumber">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Order Number</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.orderNumber }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="company">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Company</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.company }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="bf">
          <mat-header-cell *matHeaderCellDef mat-sort-header>BF</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.bf }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="gsm">
          <mat-header-cell *matHeaderCellDef mat-sort-header>GSM</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.gsm }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="reel">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Reel</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.reel }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="size">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Size</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.size }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="voucherKey">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Voucher Key</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.voucherKey }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="weight">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Weight</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.weight }}</mat-cell>
        </ng-container>
        <ng-container matColumnDef="select">
          <mat-header-cell *matHeaderCellDef>Select
            <!-- <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()"> -->
            <!-- </mat-checkbox> -->
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <button mat-raised-button color="warn" (click)="selectFromSelected(row,row.id)">Remove</button>
            <!-- <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"> -->
            <!-- </mat-checkbox> -->
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator #paginator2 [pageSize]="5" [pageSizeOptions]="[5, 10, 20]">
      </mat-paginator>
    </div>

  </mat-tab>
  <mat-tab label="Orders BF GSM">
    <app-orders-bfgsm></app-orders-bfgsm>
  </mat-tab>
  <mat-tab label="Orders BF GSM Size">
    <app-orders-bfgsmsize></app-orders-bfgsmsize>
  </mat-tab>
</mat-tab-group>
<!-- <app-selected-orders [salesOrderChild]="childMessage"></app-selected-orders> -->
<!-- <app-selected-orders [salesOrderChild]="salesOrder_selected"></app-selected-orders> -->

<!-- <div *ngIf="showLoader" align="center">
  <br>
  <br>
  <img src="./assets/loading-2.gif">
</div>
<div *ngIf="!showLoader">
  <br>
  <h3>Production Planning</h3>
  <div class="col-md-12">
    <button *ngIf="showAll" class="btn-group btn-md btn-success" (click)="showSelected()">Show Selected</button>
    <button *ngIf="!showAll" class="btn-group btn-md btn-primary" (click)="showSelected()">Show All</button>
    <button *ngIf="!showAll" class="btn-group btn-md btn-success" (click)="confirmProduction()" data-toggle="modal" data-target="#exampleModalLong">Confirm</button>
    <button class="btn-group btn-md btn-danger" (click)="clearAll()">Clear All</button>
  </div>
  <div class="row">
    <ng-template [ngIf]="showAll && !salesOrderUpdated">
      <div class="col-lg-8" *ngIf="showAll">
        <h5>All Sales Orders</h5>
        <table class="table table-responsive table-hover table-sm table-striped table-bordered">
          <thead class="bg-success">
            <tr>
              <th>No</th>
              <th>Date</th>
              <th>Order#</th>
              <th>Name</th>
              <th>Item</th>
              <th>Size</th>
              <th>Weight (Tons)</th>
              <th>Reel</th>
              <th>Change Weight</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row1 of salesOrder; let i = index">
              <td>{{i+1}}</td>
              <td>{{row1.orderDate | date : 'dd-MM-yyyy'}}</td>
              <td>{{row1.orderNumber}}</td>
              <td>{{row1.company}}</td>
              <td>{{row1.bf}} BF {{row1.gsm}} GSM</td>
              <td>{{row1.size}}</td>
              <td>{{row1.weight}}</td>
              <td bgcolor="springgreen">{{row1.reel}}</td>
              <td>
                <input class="input-sm" #newQuantity type="text" pattern="[0-9]" maxlength="5" style="width:50px;" [id]="i" />
              </td>
              <td>
                <button type="button" class="btn btn-success btn-sm" (click)="selectFromAll(row1,row1.id,newQuantity.value)">Select
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-template>
    <ng-template [ngIf]="!showAll && !salesOrderUpdated">
      <div class="col-lg-8">
        <h5>Selected Sales Orders</h5>
        <table class="table table-responsive table-hover table-sm table-striped table-bordered">
          <thead class="bg-primary">
            <tr>
              <th>No</th>
              <th>Date</th>
              <th>Order#</th>
              <th>Name</th>
              <th>Item</th>
              <th>Size</th>
              <th>Weight</th>
              <th>Reel</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row2 of salesOrder_selected; let i = index">

              <td>{{i+1}}</td>
              <td>{{row2.orderDate | date : 'dd-MM-yyyy'}}</td>
              <td>{{row2.orderNumber}}</td>
              <td>{{row2.company}}</td>
              <td>{{row2.bf}} BF {{row2.gsm}} GSM</td>
              <td>{{row2.size}}</td>
              <td>{{row2.weight}}</td>
              <td bgcolor="springgreen">{{row2.reel}}</td>
              <td>
                <button type="button" class="btn btn-warning btn-sm" (click)="selectFromSelected(row2,row2.id)">Remove
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-template>
    <div class="col-lg-4">
      <div>
        <h5>Group Items - Consolidated</h5>
        <table class="table table-responsive table-hover table-sm table-striped table-bordered">
          <thead class="bg-warning">
            <tr>
              <th>No</th>
              <th>Item (BF)</th>
              <th>Weight</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row3 of salesOrder_BF; let i = index">
              <td>{{i+1}}</td>
              <td>{{row3.bf}}</td>
              <td>{{row3.weight}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div>
        <table class="table table-responsive table-hover table-sm table-striped table-bordered">
          <thead class="bg-warning">
            <tr>
              <th>No</th>
              <th>Item (BF GSM)</th>
              <th>Weight</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row5 of salesOrder_BFGSM; let i = index">
              <td>{{i+1}}</td>
              <td>{{row5.bf}} BF {{row5.gsm}} GSM</td>
              <td>{{row5.weight}}</td>
            </tr>
          </tbody>
        </table>

      </div>
      <div>
        <table class="table table-responsive table-hover table-sm table-striped table-bordered">
          <thead class="bg-warning">
            <tr>
              <th>No</th>
              <th>Item (BF GSM Size)</th>
              <th>Weight</th>
              <th>Reel</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row4 of salesOrder_BFGSMSize; let i = index">
              <td>{{i+1}}</td>
              <td>{{row4.bf}} BF {{row4.gsm}} GSM - {{row4.size}}</td>
              <td>{{row4.weight}}</td>
              <td bgcolor="springgreen">{{row4.reel}}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Message</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Order Status has been updated successfully</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> -->